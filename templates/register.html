{% extends "base.html" %}
{% block title %}Register Patient â€” PrettyGoodAI Voice Bot{% endblock %}

{% block content %}
<div class="card">
  <h1>Register Test Patient</h1>
  <p class="subtitle">
    Register the patient identity the bot will use during calls. Use the
    <strong>same name, phone, and date of birth</strong> when signing up at
    <a href="https://pgai.us/athena" target="_blank" rel="noopener">pgai.us/athena</a>
    so Athena can greet the caller by name. Calls will start automatically after you submit.
  </p>

  {% if error %}
  <div class="alert alert-error">{{ error }}</div>
  {% endif %}

  <form id="register-form" method="POST" action="/register">
    <div class="field">
      <label for="full_name">Full Name</label>
      <input
        type="text"
        id="full_name"
        name="full_name"
        value="{{ values.get('full_name', '') }}"
        placeholder="Jane Smith"
        autocomplete="name"
        required
      >
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        value="{{ values.get('email', '') }}"
        placeholder="jane@example.com"
        autocomplete="email"
        required
      >
    </div>

    <div class="field">
      <label for="phone">
        Phone Number
        <span class="hint">Must match your Twilio number</span>
      </label>
      <input
        type="tel"
        id="phone"
        name="phone"
        value="{{ values.get('phone', from_number) }}"
        placeholder="+15551234567"
        autocomplete="tel"
        required
      >
      <span class="field-error" id="phone-error"></span>
    </div>

    <div class="field">
      <label for="dob">Date of Birth</label>
      <input
        type="date"
        id="dob"
        name="dob"
        value="{{ values.get('dob', '') }}"
        required
      >
    </div>

    <button type="submit">Register &amp; Start Simulation</button>
  </form>
</div>

<script src="{{ url_for('static', filename='js/form.js') }}" defer></script>
{% endblock %}
