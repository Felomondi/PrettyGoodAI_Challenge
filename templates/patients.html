{% extends "base.html" %}
{% block title %}Registered Patients â€” PrettyGoodAI Voice Bot{% endblock %}

{% block content %}
<div class="card wide">
  <h1>Registered Patients</h1>

  {% if patients %}
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Date of Birth</th>
        <th>Registered</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for patient in patients %}
      <tr>
        <td>{{ patient.full_name }}</td>
        <td>{{ patient.email }}</td>
        <td>{{ patient.phone }}</td>
        <td>{{ patient.dob }}</td>
        <td>{{ patient.created_at[:10] }}</td>
        <td>
          <form
            method="POST"
            action="/patients/{{ patient.id }}/delete"
            onsubmit="return confirm('Delete {{ patient.full_name }}? This cannot be undone.')"
          >
            <button type="submit" class="btn btn-danger">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="empty">No patients registered yet. <a href="/register">Register one now.</a></p>
  {% endif %}

  <div class="actions">
    <a href="/register" class="btn">Register New Patient</a>
  </div>
</div>
{% endblock %}
